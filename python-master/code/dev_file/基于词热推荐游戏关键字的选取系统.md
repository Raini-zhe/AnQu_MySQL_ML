基于词热推荐游戏关键字选取系统

6-12-----6-13：构建数据分析开发环境，以及分布式应用平台
6-14-----6-15：导入数据，了解基本数据

1.数据表
2.数据处理
6-17：数据处理，将收集的数据处理成分析所需的数据（将关系数据转换为数值矩阵的形式，方便后面的聚类运算）
3.收索词的聚类处理   k-means 算法（被选）
在中文样本下聚类，实验采用了k-means算法和自组织神经，canopy 粗聚类（当前数据集下有效时间内未计算出结果时间）

6-18----6-22:实验效果下的数据量：词汇记录8万，
采用K-means的聚类算法实现词的聚类，时间在100s以上，自组织神经网络效率较k-means 效率稍低，并且准确率，效果上没有k-means好。
10000条样本数据大概需要60s.

6-22问题：完整的K-means的分析效率的问题是目前影响因素之一！
才测试阶段我们采用的是mini-batch K-means 高效，10万数据计算时间小于10s
使用mini -batch K-means会处理10000条样本数据用时5.1s
4.聚类的描述采用DCF-DCL先描述后聚类，先聚类后描述算法结合来实现

6-23:描述时先统计词的在聚类中的出现频数，根据类簇的词的相似度以及词的频数计算出词在类簇中的重要性，选择重要性高的词作为类簇的类别描述。
统计词时对于长词我们将其看做时文档，采用文档分类的描述的方法，归类长词

对于词的相似性的计算会有较低的执行效率：6-24:
方法一：最直接效率最低的方法：就是对整个词集合计算相似度，时间复杂度为O（N×N）
改进版一：类簇内计算相似度，扫描数据，计算相似度，时间复杂度也是O（N×N/K）K为聚类数 在当前数据集计算时间提高近30%
改进版二：类簇内计算，并记录计算结果，对于已计算的组合，不再二次计算，时间复杂度也是O (N*N/K) ,较改进版一，在当前数据集计算效率提高近20%
6-24问题：目前在效率上还是比较慢的主要问题点之一。

选择

同类词的关联
6-27:目前对于词的关联项目主要可选的选择要素包含：词的热度、词的当前的searchCount 、词的标签、词的聚类相似度（即某一词在聚类的相似程度（目前想到的有平均相似度、聚类内的与其他各词的相似度之和））
个人理解：
//根据实际需要，调节各因素的权重
1.词的热度是表示：该词与APP的被收索到的可能性，词热值越高，被收索到的可能性越高
2.词的标签：每个词均有自己的genreID标签集合，根据标签的重要性可以确定词的重要性
3.词的聚类相似度：词在所在的聚类里相似度越高，词被选为该聚类的代表词汇可能性越高
4.词的searchCount （表示有多少应用app以该词作为keyWord）:个人暂时认为可能与词的竞争性相关，
   目前是选择竞争度高的还是竞争度低的词，作为聚类代表词，有待确定。优选竞争性小的。

6-28：
1.聚类出基础词库的类别;
2.计算找出计算词的所在词类簇;
3.通过核心关键词，选择与其相似度高的词作候选词;
4.从中选择词热在前15-20的词作为关键词.
目前实验选择的Top15的推荐词，经多次验证效果是满足需求的！

 6-28问题：
 对于数据组合以及分词的需要目前还是要考虑的问题！
 6-29:对于SOM自适应神经网络测试实现
 数据类型沿用之前的K-means数据
 学习方法的描述如下：
 1.初始化：对输入的各权向量赋小随机数，并进行归一化处理，建立初始化邻域和学习率初值
weight  :权值向量矩阵 （首先整个权值向量矩阵归一化，随后计算需要单条归一化）
k_cluster ：初始化的聚类数目，只是作为初始限定
iter_times ： 迭代次数（目前看并没什么卵用）
learn_deep ：学习率
stop_deep_val ：学习率下限（停止迭代的阀值）
2.接收输入
从训练集中取一输入样本，并进行归一化处理（可以提前对整个数据集进行归一化）
3.计算和寻找优胜节点
计算权值向量与样本向量的点积，找出点积最大的权值向量
4.计算优胜邻域
5.以该权值向量为中心调整在中心半径内的所有权值向量
6，计算学习率，结束判定.

6-30:SOM自适应神经网络算法
6-30问题：对于算法执行效率上，明显过慢问题！
在10000数据集下迭代7次时间是400---500s之间，聚类效果不理想，仅仅聚为两个类
暂时思考：每次都要更新相邻的权重向量，是目前处理问题慢的主要原因，主要就是查找相邻向量，解决方法是向量排序（问题又来了，排序的基准是什么？按照相邻距离排序，那么每次都得排序，如果初始的类为K 则排序时间开销：O（N * (K log K +K * d)）,d是单次就按距离的时间）.
测试仅更新优胜节点的权值向量的方式：
在10000条样本数据集上，迭代7次时间大约为150s左右；
由此可知，分析计算主要是在更新相邻

6-28 ------ 6-30：实验一     对关键词的选择实验    
选词一样，应用一样（仅应用名稍作修改）
选词原则：随机在关键词库中选择两组词，每组词分别包含（（词热较大，searchCount较小），（词热较大，searchCount较大），（searchCount较大，词热较大），（searchCount较大，词热较小），（词热平均，searchCount平均）

   选 词            实验组（初始排名1128308547）          对照组（初始排名1128308384）    词 热 	searchCount
炉石传说	  314			      315		        8105	   19
  游  戏 		  无			       无		        8656	   69150	
  盛  大		  无			       无		        6180	   76068
七 大 罪		  无			       无		        4605	   76137
物语系列	  270			       268	        4686	   1229

网易风云音乐       181			       179	        8909	   28
  地  图		  无			       无		        8110	   13614
  好大夫		  无			       无		        6382	   76144
七大奇迹	  无			       无		        4605	   77149
未来孩子长相       99			       101	        4684	   1032

 one day :
 		  321			      322
 		  None			      None
 		  None			      None
 		  None			      None
 		  270			      269

 		  184			       269
 		  



实验结果分析可知：
（1）对于高SearchCount的值高的基本不会有排名，因此可以实现过滤将这些关键词给过滤掉.
（2）可以预测app store对于新上线app 的初始排名算法是确定的！并且遵循词热单调递增（数据还少，递增趋势不明显）和关于searchCount的先增后减趋势。
	因此，可以实验测试这种猜想。
（3）另外，在同一聚类下是否效果会更好，也需要进一步实验测试。

6-30-----------未定：实验二     参数模型的构建实验以及模型优化实验
思路错误：
选词聚类是在竞品词库的聚类所以不会有所谓的聚类词汇与应用不符，偏离太远的情况
是因为词的来源是竞品关键词所形成的词库。

7-01 数据选择
（1）选择数据：
	关键词的选择采取的一般是选择词热高的，searchCount较低的词。
	品类词的选择采用的是选择searchCount高的，priority 尽可能高。 已经能够大概选择出相应维度的品类词和关键词。
（2）实验测试：选择类型相同的两款应用，设置关键字和品类词，观察上线后的应用在每一关键词下的排名。
实验数据分析
组 一：
品类词：
单机 免费游戏 休闲游戏 冒险游戏
关键词：
全民主公，倚天屠龙记，一起斗牛，lol掌上英雄联盟

ID:   			1130223652          1130249188

单机			无			无
免费游戏     		无			无
休闲游戏		562			561

全民主公		580			579
倚天屠龙记		123			122
一起斗牛		352			351
lol掌上英雄联盟		172			171

单机一起斗牛		47			48
免费倚天屠龙记		67			68
休闲游戏全民公主	无			无
单机游戏全民公主	无			无
休闲全民公主		无			无		

ID:   			1130223652          1130249188


组 二：
品类词：
动作游戏		1540			1539	
体育游戏		无			无
主题游戏 		346			345

全民艾泽拉斯		35			34
三国群英传		240 			241			
全民·炸金花		440			441
功夫熊猫		483			482

动作全民艾泽拉斯	4			3     表单共四款
体育全民艾泽拉斯	2			1     表单就这两款
主题全民艾泽拉斯	2			1     表单就这两款
动作全民		137			136
全民炸金花		645			646


1.由实验统计数据可以知道，关键词的选择基准应当是对于词热比较大的searchCount 较小（一般在100----2000之间比较好）的词；
2.于此同时，对于关键词和品类词的组合也突显出较大优势，对于品类词选择基本采用的是选择词热较热，searchCount较大的词作
   为品类词。

7-02-----7-05:做竞品词的筛选的，根据竞品相关关键词进行推荐关键词和品类词
效果不是很好

7-06:

   关键词选取流程
1.输入App竞品（至少三个竞品的ID）                       -----已实现
2.提取竞品的竞品App(Top 15 ) ID；                          -----已实现
3.竞品关键词的提取；                                                -----已实现
4.竞品关键词群的品类词的筛选；                             -----已实现 7-18
5.品类关键词的联想词拓展；                                     -----已实现 7-18
6.竞品关键词以及联想词为分析词群，聚类              -----已实现
7.根据聚类筛选出各聚类中的词热，searchCount优选    -----已实现
8.推荐相应的品类词，关键词            -----已实现

问题7-06-1：
从竞品关键词中归纳出全部的品类词：
目前来看，归纳出的词精准度不够，需要进一步提高数据的精准度。
初步想法 是:将数据进行分词，划出分词中统计量高的词作为品类的组合最小元。

7-07
 根据竞品关键词，做联想词拓展
 下一步根据拓展词和关键词所构成的词集；
 根据实际的词集聚类分析；
 根据聚类选择维度的词，进行推荐得出，关键词推荐集合。
 7-07 问题：
联想词的查找在mysql数据库下速度过慢总数据10w条的情况模糊索引做3.4w情况下
运行时间1150s左右
同时,之后获取数据的词热、searchCount、genre等信息耗时也很多
目前需要解决的是mysql 的数据检索效率问题。
7-09 解决方案是先将数据一次行读入内存，在内存中对字段匹配，提取特征满足条件的记录
时间：在相同数据集下，执行时间，由原来的1150s提升到220s左右
问题：内存暂用过大，会造成数据计算，数据结果空或只有部分结果数据的情况。
7-10：问题解决方案：分块提取数据，块内做数据匹配提取。
相同数据量的数据处理时间，450s左右。

7-08
对于联想词的聚类分析已解决
目前有关与mysql数据库模糊查询速度慢的的问题：原来是对于K个ID进行K次遍历数据库记录(读写数据库K次)
现在读一次数据，判断出数据
新的问题需要进一步解决
就是根据竞品类别去拓展词
结合类别拓展词，竞品词，竞品关键词联想词等词分类获得多维度的推荐词

7-11品类词和关键词的聚类选取结果表明，目前对于关键词选取上还需优化。
出现选词过于长。
对于品类词的选择是需根据需要优化聚类类别数目。

解决方案初设想：
根据选择对关键词加权，选择权值大的词
是否是关键词候选集里的词由词的SearchCount和词长决定
！如果searchCount越大，词长越长词的被选可能性越低
!!另外也可以使用模型选择候选推荐词
首先对分类词，列出其选择相关影响因素
由资深运营人员确定词是否可以选择
选择的词标记为1，未选择的词标记为0
根据此数据，构建逻辑斯蒂回归模型。
以后的分析中，根据模型选择词作为候选词
!!这样可以经常根据实际需要跟新选词影响因素的权重，
于此同时，选词也会更加准确

备选词选择模型应符合的选词规则：
高词热，低SearchCount，短词（词长：2---10较好，）   选
高词热，高SearchCount，短词                                        不选
低词热， ×                       ×                                             不选
高词热，低searchcount    长词（词长 >  10 ）                不选
目前想不到合适的模型，能够构建数学模型计算模型参数，再选词
需要进一步实验或则经过资深运营人员选词数据构建模型：这种模
型目前想到的是逻辑斯蒂回归

另外添加设想：
根据关键词与品类词的关联覆盖情况，来更新增加其权重
例如：
如果关键词是 ××播放器，品类词是：播放器
则会加大××播放器的权重

聚类效果好坏与searchCount的标准有关



1.  输入App竞品（至少三个竞品的ID）
2.  提取竞品的竞品App(Top 15 ) ID；
3.  竞品关键词的提取；
4.  竞品关键词群的品类词的筛选；
5.  品类关键词的联想词拓展；
6.  竞品关键词以及联想词为分析词群，聚类
7.  根据聚类筛选出各聚类中的词热，searchCount优选
8.  推荐相应的品类词，关键词

